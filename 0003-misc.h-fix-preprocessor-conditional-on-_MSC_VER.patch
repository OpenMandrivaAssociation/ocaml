From d497565758b5c80d8a7bf4cad02e5a4558ae6b00 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Nicol=C3=A1s=20Ojeda=20B=C3=A4r?= <n.oje.bar@gmail.com>
Date: Tue, 17 May 2022 10:21:34 +0200
Subject: [PATCH 03/24] misc.h: fix preprocessor conditional on _MSC_VER

(cherry picked from commit 253d605e10865371aed45967a94caed0642b7583)
---
 runtime/caml/misc.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/runtime/caml/misc.h b/runtime/caml/misc.h
index 5915c30a7b..494d45e8f8 100644
--- a/runtime/caml/misc.h
+++ b/runtime/caml/misc.h
@@ -35,7 +35,7 @@
   /* Supported since at least GCC 3.1 */
   #define CAMLdeprecated_typedef(name, type) \
     typedef type name __attribute ((deprecated))
-#elif _MSC_VER >= 1310
+#elif defined(_MSC_VER) && _MSC_VER >= 1310
   /* NB deprecated("message") only supported from _MSC_VER >= 1400 */
   #define CAMLdeprecated_typedef(name, type) \
     typedef __declspec(deprecated) type name
-- 
2.37.0.rc2

